# multi-relation tests

FEATURE: multiple 1:1 relations
background:
 configure loadFKs = true
thenType: struct

---
title: MtoN-1
chainNextTest:true
given:
 type Customer struct {
 id long primaryKey, 
 name string, 
 relation addrHome Address 'home' optional one parent,
 relation addrBiz Address 'biz' optional one  
 } end
 type Address struct {
  aid string primaryKey, 
  city string,
  relation cust1 Customer 'home' one optional,
  relation cust2 Customer 'biz' one 
 } end

when:
  insert Customer { id: 1, name:'art' }
  insert Customer { id: 2, name:'bob' }
  insert Customer { id: 3, name:'carol' }
  
  insert Address { aid: 100, city:'athens', cust1:1, cust2:2 }
  insert Address { aid: 101, city:'boston', cust1:3, cust2:3 }
  insert Address { aid: 102, city:'cornwall', cust2:1 }
  
  let x = Customer[true].fks()
then:
value:a:Customer {
 vid:1
 vwid:33
}

